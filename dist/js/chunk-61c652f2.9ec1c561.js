(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-61c652f2","chunk-2d21f098"],{6138:function(e,t,n){},a341:function(e,t,n){"use strict";n("6138")},d7b1:function(e,t,n){"use strict";n("8e6e"),n("ac6a"),n("456d");var a=n("ade3"),o=n("4328"),l=n.n(o),r=n("dea3");function i(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?i(Object(n),!0).forEach((function(t){Object(a["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):i(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}t["a"]={data:function(){return Object(a["a"])({mixinViewModuleOptions:{exportExlUrl:""},dataList:[],dataListLoading:!1,page:1,limit:10,total:0,scrollTops:0,dataListSelections:[],uploadLoading:!1,uploadVisible:!1,title:"",url:"",downLoadUrl:""},"dataListSelections",[])},activated:function(){window.addEventListener("scroll",this.handleScroll,!0),this.listenerFunction()},deactivated:function(){window.removeEventListener("scroll",this.handleScroll,!0)},methods:{searchData:function(){this.dataListSelections.length>0&&this.$refs["tables"].clearSelection(),this.page=1,this.getListData()},pageSizeChangeHandle:function(e){this.page=1,this.limit=e,this.getListData()},pageCurrentChangeHandle:function(e){this.page=e,this.getListData()},getRowsKey:function(e){return e.id},dataListSelectionChangeHandle:function(e){this.dataListSelections=e},listenerFunction:function(){var e=this;this.$nextTick((function(){document.documentElement.scrollTop=e.scrollTops}))},getScrollPosition:function(){var e=document.documentElement.scrollTop;this.scrollTops=e},handleScroll:function(e){this.scrollTops=document.documentElement.scrollTop},exportExl:function(){var e=this,t=[];this.dataListSelections.length>0&&(t=this.dataListSelections.map((function(e){return e.id}))),this.$confirm("根据检索条件，共计将导出".concat(t.length>0?t.length:this.total,"条数据, 是否继续?"),"批量导出",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(){},beforeClose:function(n,a,o){if("confirm"===n){a.confirmButtonLoading=!0;var i=l.a.stringify(c(c({token:e.$getUserToken("token")},e.dataForm),{},{ids:t.join()}));e.$http({method:"get",withCredentials:!1,timeout:36e4,responseType:"blob",url:"".concat(e.mixinViewModuleOptions.exportExlUrl,"?").concat(i)}).then((function(t){Object(r["a"])(t.data,e.$route.meta.title)})),a.confirmButtonLoading=!1,e.$refs["tables"].clearSelection(),o()}else o()}}).finally((function(){ctx.confirmButtonLoading=!1})).catch((function(){ctx.confirmButtonLoading=!1}))},del:function(e){var t=this,n=[];n.push(e),this.$confirm("此操作将删除该上报记录，请确认操作！","删除",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(){},beforeClose:function(e,a,o){"confirm"===e?t.$http.post("/dataprocess/catAssist/delete",n).then((function(e){if(0!==e.data.code)return o(),a.confirmButtonLoading=!1,t.$message.error(e.data.msg);a.confirmButtonLoading=!1,o(),t.getListData(),t.$message.success("删除成功")})):o()}}).finally((function(){ctx.confirmButtonLoading=!1})).catch((function(){ctx.confirmButtonLoading=!1})),this.page>1&&(this.total-1)%this.limit===0&&(this.page-=1)}}}},e376:function(e,t,n){"use strict";n.r(t);n("7f7f");var a=function(){var e=this,t=e._self._c;return t("div",[t("el-card",[t("el-form",{ref:"form",attrs:{model:e.form,inline:!0,rules:e.rules}},[t("el-form-item",{attrs:{label:"时间范围",prop:"value1"}},[t("el-date-picker",{attrs:{type:"datetimerange","range-separator":"至","start-placeholder":"开始时间","value-format":"yyyy-MM-dd HH:mm:ss","end-placeholder":"结束时间",clearable:!1,"default-time":["00:00:00","23:59:59"],"picker-options":e.pickerOptions},on:{blur:e.pickerBlur},model:{value:e.form.value1,callback:function(t){e.$set(e.form,"value1",t)},expression:"form.value1"}})],1),t("el-form-item",{attrs:{label:"条件选择",prop:"phoneNumType"}},[t("el-select",{attrs:{placeholder:"请选择"},model:{value:e.form.phoneNumType,callback:function(t){e.$set(e.form,"phoneNumType",t)},expression:"form.phoneNumType"}},[t("el-option",{attrs:{label:"主叫号码",value:"0"}}),t("el-option",{attrs:{label:"被叫号码",value:"1"}})],1)],1),t("el-form-item",{staticClass:"num",attrs:{prop:"phoneNum"}},[t("el-input",{attrs:{placeholder:"号码",clearable:""},on:{blur:e.handleInput},model:{value:e.form.phoneNum,callback:function(t){e.$set(e.form,"phoneNum",t)},expression:"form.phoneNum"}})],1),t("el-form-item",[e._v("(多个号码,分隔)")]),t("el-row",[t("el-form-item",{attrs:{label:"协议类型",prop:"protocolType"}},[t("el-checkbox",{attrs:{indeterminate:e.isIndeterminate},on:{change:e.handleCheckAllChange},model:{value:e.checkAll,callback:function(t){e.checkAll=t},expression:"checkAll"}},[e._v("\n                        全选\n                    ")]),t("el-checkbox-group",{on:{change:e.handleCheckedCitiesChange},model:{value:e.form.protocolType,callback:function(t){e.$set(e.form,"protocolType",t)},expression:"form.protocolType"}},e._l(e.cities,(function(n){return t("div",{key:n.name},[t("span",{staticClass:"test"},[e._v(e._s(n.name))]),e._l(n.data,(function(n){return t("el-checkbox",{key:n.label,attrs:{label:n.label}},[e._v("\n                                "+e._s(n.label)+"\n                            ")])}))],2)})),0)],1)],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:e.onSubmit}},[e._v("查询")]),t("el-button",{on:{click:e.onReset}},[e._v("重置")])],1)],1),t("div",{staticClass:"btns"},[t("el-button",{attrs:{type:"success"},on:{click:e.exportImport}},[e._v("导出")])],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.loading,expression:"loading"}],ref:"tables",staticClass:"tab",staticStyle:{width:"100%"},attrs:{data:e.dataList,border:"","header-cell-style":{background:"rgba(194, 210, 255, 0.3)",color:"#040415"},"row-key":e.getRowsKey,"row-style":e.iRowStyle,"cell-style":e.iCellStyle,"header-row-style":e.iHeaderRowStyle},on:{"selection-change":e.dataListSelectionChangeHandle}},[t("el-table-column",{attrs:{type:"selection","header-align":"center",align:"center",width:"50","reserve-selection":!0}}),t("el-table-column",{attrs:{prop:"protocol",align:"center",label:"协议名称",width:"120"}}),t("el-table-column",{attrs:{prop:"startTime",align:"center",label:"开始时间",width:"155"}}),t("el-table-column",{attrs:{prop:"endTime",align:"center",label:"结束时间",width:"155"}}),t("el-table-column",{attrs:{prop:"phoneNum",align:"center",label:"主叫号码",width:"125"}}),t("el-table-column",{attrs:{prop:"calledPhoneNum",align:"center",label:"被叫号码",width:"125"}}),t("el-table-column",{attrs:{prop:"adress",align:"center",label:"原被叫号码/前传目的方地址",width:"120"}}),t("el-table-column",{attrs:{prop:"msrn",align:"center",label:"MSRN/MSISDN",width:"125"}}),t("el-table-column",{attrs:{prop:"genericNum",align:"center",label:"通用号码",width:"125"},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row.genericNum;return[t("el-tooltip",{attrs:{effect:"dark",content:a,placement:"top"}},[t("div",{staticClass:"singleBox"},[e._v("\n                            "+e._s(a)+"\n                        ")])])]}}])}),t("el-table-column",{attrs:{prop:"imsi",align:"center",label:"IMSI",width:"140"}}),t("el-table-column",{attrs:{prop:"city",align:"center",label:"地市"}}),t("el-table-column",{attrs:{prop:"opc",align:"center",label:"OPC",width:"120"},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row.opc;return[t("el-tooltip",{attrs:{effect:"dark",content:a,placement:"top"}},[t("div",{staticClass:"singleBox"},[e._v("\n                            "+e._s(a)+"\n                        ")])])]}}])}),t("el-table-column",{attrs:{prop:"dpc",align:"center",label:"DPC",width:"120"},scopedSlots:e._u([{key:"default",fn:function(n){var a=n.row.dpc;return[t("el-tooltip",{attrs:{effect:"dark",content:a,placement:"top"}},[t("div",{staticClass:"singleBox"},[e._v("\n                            "+e._s(a)+"\n                        ")])])]}}])}),t("el-table-column",{attrs:{prop:"msc",align:"center",label:"MSC"}}),t("el-table-column",{attrs:{prop:"bsc",align:"center",label:"BSC"}}),t("el-table-column",{attrs:{prop:"callType",align:"center",label:"呼叫类型"},scopedSlots:e._u([{key:"default",fn:function(t){var n=t.row.callType;return[e._v("\n                    "+e._s(n)+"\n                ")]}}])}),t("el-table-column",{attrs:{prop:"callDuration",align:"center",label:"通话时长(ms)",width:"110"}})],1)],1)],1)},o=[],l=(n("8e6e"),n("ac6a"),n("456d"),n("ac4d"),n("8a81"),n("5df3"),n("1c4c"),n("6b54"),n("34ef"),n("ade3")),r=(n("a481"),n("d7b1")),i=n("dea3");function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(l["a"])(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function u(e,t){var n="undefined"!==typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=d(e))||t&&e&&"number"===typeof e.length){n&&(e=n);var a=0,o=function(){};return{s:o,n:function(){return a>=e.length?{done:!0}:{done:!1,value:e[a++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var l,r=!0,i=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return r=e.done,e},e:function(e){i=!0,l=e},f:function(){try{r||null==n.return||n.return()}finally{if(i)throw l}}}}function d(e,t){if(e){if("string"===typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?p(e,t):void 0}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,a=new Array(t);n<t;n++)a[n]=e[n];return a}var f={mixins:[r["a"]],data:function(){var e=this;return{loading:!1,form:{value1:[],phoneNum:"",phoneNumType:"",startTime:"",endTime:"",protocolType:[]},rules:{value1:[{type:"array",required:!0,message:"请选择日期",trigger:"change"}],phoneNum:[{required:!0,message:"至少包含一个手机号",trigger:"blur"}],phoneNumType:[{required:!0,message:"请选择号码类型",trigger:"change"}],protocolType:[{type:"array",required:!0,message:"请至少选择一个活动性质",trigger:"change"}]},token:this.$getUserToken("token"),url:"",fileList:[],checkAll:!1,cities:[{name:"",data:[{label:"sipcc",isChecked:!1},{label:"volte_si",isChecked:!1},{label:"gmap_cc",isChecked:!1},{label:"mchw_moc",isChecked:!1},{label:"mchw_mtc",isChecked:!1},{label:"mchw_bicc",isChecked:!1},{label:"hw_isup",isChecked:!1},{label:"voltec1_gmisc",isChecked:!1}]}],isIndeterminate:!1,dataList:[],selectDate:"",pickerOptions:{onPick:function(t){var n=t.maxDate,a=t.minDate;e.selectDate=a.getTime(),n&&(e.selectDate="")},disabledDate:function(t){if(e.selectDate){var n=864e5,a=e.selectDate-n,o=e.selectDate+n;return t.getTime()<a||t.getTime()>o}}}}},watch:{"form.value1":{handler:function(e){this.form.startTime=null!==e?e[0]:"",this.form.endTime=null!==e?e[1]:""}}},created:function(){this.handleCheckAllChange(!0)},methods:{pickerBlur:function(){this.selectDate=""},handleInput:function(){this.form.phoneNum=this.form.phoneNum.replaceAll("，",","),this.form.phoneNum=this.form.phoneNum.replace(/^,|,$/g,"")},handleCheckAllChange:function(e){this.checkAll=e,this.isIndeterminate=!1,this.form.protocolType=e?this.getAllProtocolTypes():[]},getAllProtocolTypes:function(){var e,t=[],n=u(this.cities);try{for(n.s();!(e=n.n()).done;){var a,o=e.value,l=u(o.data);try{for(l.s();!(a=l.n()).done;){var r=a.value;t.push(r.label)}}catch(i){l.e(i)}finally{l.f()}}}catch(i){n.e(i)}finally{n.f()}return t},handleCheckedCitiesChange:function(e){var t=e.length;this.checkAll=t===this.cities[0].data.length,this.isIndeterminate=t>0&&t<this.cities[0].data.length},iRowStyle:function(e){e.row,e.rowIndex;return"height:40px"},iHeaderRowStyle:function(e){e.row,e.rowIndex;return"height:40px"},iCellStyle:function(e){e.row,e.column,e.rowIndex,e.columnIndex;return"padding:0px"},onSubmit:function(){var e=this;this.$refs.form.validate((function(t){if(!t)return e.$message.warning("存在未填写的必填项");e.getListData()}))},onReset:function(){this.dataList=[],this.$refs.form.resetFields(),this.checkAll=[],document.getElementsByClassName("el-table__empty-text")[0].innerText="暂无数据"},getListData:function(){var e=this;this.loading=!0,this.dataList=[];var t=s(s({},this.form),{},{protocolType:this.form.protocolType.join(",")});delete t.value1,this.$http.get("/datamanage/TraceabilityCheck/list",{params:t}).then((function(t){var n;e.dataList=null!==(n=t.data.data)&&void 0!==n?n:[],document.getElementsByClassName("el-table__empty-text")[0].innerText=e.dataList.length?"暂无数据":"无通联"})).finally((function(){e.loading=!1}))},s2ab:function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),a=0;a<e.length;a++)n[a]=255&e.charCodeAt(a);return t},exportImport:function(){var e=this;if(!this.dataList.length)return this.$message.warning("当前无数据可导出、请先查询！");this.$confirm("根据检索条件，共计将导出".concat(this.dataListSelections.length?this.dataListSelections.length:this.dataList.length,"条数据, 是否继续?"),{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(){},beforeClose:function(t,n,a){"confirm"===t?(n.confirmButtonLoading=!0,e.$http({method:"post",withCredentials:!1,timeout:36e4,responseType:"blob",url:"/datamanage/TraceabilityCheck/exportCheck",data:e.dataListSelections.length?e.dataListSelections:e.dataList}).then((function(t){Object(i["a"])(t.data,"信令溯源核查".concat(e.$moment().format("YYYY-MM-DD")),".xls")})),n.confirmButtonLoading=!1,e.$refs["tables"].clearSelection(),a()):a()}}).finally((function(){ctx.confirmButtonLoading=!1})).catch((function(){ctx.confirmButtonLoading=!1}))},handleSuccess:function(){},downTemplate:function(e){}}},h=f,m=(n("a341"),n("2877")),g=Object(m["a"])(h,a,o,!1,null,"48f75960",null);t["default"]=g.exports}}]);