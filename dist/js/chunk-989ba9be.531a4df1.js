(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-989ba9be","chunk-2d0e2156"],{"2a8a":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("el-card",{staticClass:"aui-card--fill",attrs:{shadow:"never"}},[t("div",{staticClass:"mod-demo__news"},[t("el-form",{attrs:{inline:!0,model:e.dataForm},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.getDataList()}}},[t("el-form-item",[t("el-input",{attrs:{placeholder:e.$t("news.title"),clearable:""},model:{value:e.dataForm.title,callback:function(t){e.$set(e.dataForm,"title",t)},expression:"dataForm.title"}})],1),t("el-form-item",[t("el-date-picker",{attrs:{type:"daterange","value-format":"yyyy-MM-dd","range-separator":e.$t("datePicker.range"),"start-placeholder":e.$t("datePicker.start"),"end-placeholder":e.$t("datePicker.end")},model:{value:e.daterange,callback:function(t){e.daterange=t},expression:"daterange"}})],1),t("el-form-item",[t("el-button",{on:{click:function(t){return e.getDataList()}}},[e._v(e._s(e.$t("query")))])],1),t("el-form-item",[t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.addOrUpdateHandle()}}},[e._v(e._s(e.$t("add")))])],1),t("el-form-item",[t("el-button",{attrs:{type:"danger"},on:{click:function(t){return e.deleteHandle()}}},[e._v(e._s(e.$t("deleteBatch")))])],1)],1),t("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataListLoading,expression:"dataListLoading"}],staticStyle:{width:"100%"},attrs:{data:e.dataList,border:""},on:{"selection-change":e.dataListSelectionChangeHandle,"sort-change":e.dataListSortChangeHandle}},[t("el-table-column",{attrs:{type:"selection","header-align":"center",align:"center",width:"50"}}),t("el-table-column",{attrs:{prop:"title",label:e.$t("news.title"),"header-align":"center",align:"center"}}),t("el-table-column",{attrs:{prop:"pubDate",label:e.$t("news.pubDate"),sortable:"custom","header-align":"center",align:"center",width:"180"}}),t("el-table-column",{attrs:{prop:"createDate",label:e.$t("news.createDate"),sortable:"custom","header-align":"center",align:"center",width:"180"}}),t("el-table-column",{attrs:{label:e.$t("handle"),fixed:"right","header-align":"center",align:"center",width:"150"},scopedSlots:e._u([{key:"default",fn:function(a){return[t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.addOrUpdateHandle(a.row.id)}}},[e._v("\n                        "+e._s(e.$t("update"))+"\n                    ")]),t("el-button",{attrs:{type:"text",size:"small"},on:{click:function(t){return e.deleteHandle(a.row.id)}}},[e._v("\n                        "+e._s(e.$t("delete"))+"\n                    ")])]}}])})],1),t("el-pagination",{attrs:{"current-page":e.page,"page-sizes":[10,20,50,100],"page-size":e.limit,total:e.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"size-change":e.pageSizeChangeHandle,"current-change":e.pageCurrentChangeHandle}}),e.addOrUpdateVisible?t("add-or-update",{ref:"addOrUpdate",on:{refreshDataList:e.getDataList}}):e._e()],1)])},n=[],i=a("e1a5"),l=a("7cd8"),o={mixins:[i["a"]],data:function(){return{mixinViewModuleOptions:{getDataListURL:"/demo/news/page",getDataListIsPage:!0,deleteURL:"/demo/news",deleteIsBatch:!0},daterange:null,dataForm:{title:"",startDate:"",endDate:""}}},watch:{daterange:function(e){this.dataForm.startDate=e[0],this.dataForm.endDate=e[1]}},components:{AddOrUpdate:l["default"]}},d=o,s=a("2877"),u=Object(s["a"])(d,r,n,!1,null,null,null);t["default"]=u.exports},"7cd8":function(e,t,a){"use strict";a.r(t);var r=function(){var e=this,t=e._self._c;return t("el-dialog",{attrs:{visible:e.visible,title:e.dataForm.id?e.$t("update"):e.$t("add"),"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.visible=t}}},[t("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"120px"},nativeOn:{keyup:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.dataFormSubmitHandle()}}},[t("el-form-item",{attrs:{prop:"title",label:e.$t("news.title")}},[t("el-input",{attrs:{placeholder:e.$t("news.title")},model:{value:e.dataForm.title,callback:function(t){e.$set(e.dataForm,"title",t)},expression:"dataForm.title"}})],1),t("el-form-item",{attrs:{prop:"content",label:e.$t("news.content")}},[t("div",{attrs:{id:"J_quillEditor"}}),t("el-upload",{staticStyle:{display:"none"},attrs:{action:e.uploadUrl,"show-file-list":!1,"before-upload":e.uploadBeforeUploadHandle,"on-success":e.uploadSuccessHandle}},[t("el-button",{ref:"uploadBtn",attrs:{type:"primary",size:"small"}},[e._v(e._s(e.$t("upload.button")))])],1)],1),t("el-form-item",{attrs:{prop:"pubDate",label:e.$t("news.pubDate")}},[t("el-date-picker",{attrs:{type:"datetime","value-format":"yyyy-MM-dd HH:mm:ss",placeholder:e.$t("news.pubDate")},model:{value:e.dataForm.pubDate,callback:function(t){e.$set(e.dataForm,"pubDate",t)},expression:"dataForm.pubDate"}})],1)],1),t("template",{slot:"footer"},[t("el-button",{on:{click:function(t){e.visible=!1}}},[e._v(e._s(e.$t("cancel")))]),t("el-button",{attrs:{type:"primary"},on:{click:function(t){return e.dataFormSubmitHandle()}}},[e._v(e._s(e.$t("confirm")))])],1)],2)},n=[],i=(a("a78e"),a("b047")),l=a.n(i),o=(a("8096"),a("9339")),d=a.n(o),s={data:function(){return{visible:!1,quillEditor:null,quillEditorToolbarOptions:[["bold","italic","underline","strike"],["blockquote","code-block","image"],[{header:1},{header:2}],[{list:"ordered"},{list:"bullet"}],[{script:"sub"},{script:"super"}],[{indent:"-1"},{indent:"+1"}],[{direction:"rtl"}],[{size:["small",!1,"large","huge"]}],[{header:[1,2,3,4,5,6,!1]}],[{color:[]},{background:[]}],[{font:[]}],[{align:[]}],["clean"]],uploadUrl:"",dataForm:{id:"",title:"",content:"",pubDate:""}}},computed:{dataRule:function(){var e=this,t=function(t,a,r){if(e.quillEditor.getLength()<=1)return r(new Error(e.$t("validate.required")));r()};return{title:[{required:!0,message:this.$t("validate.required"),trigger:"blur"}],content:[{required:!0,message:this.$t("validate.required"),trigger:"blur"},{validator:t,trigger:"blur"}],pubDate:[{required:!0,message:this.$t("validate.required"),trigger:"blur"}]}}},methods:{init:function(){var e=this;this.visible=!0,this.$nextTick((function(){e.quillEditor?e.quillEditor.deleteText(0,e.quillEditor.getLength()):e.quillEditorHandle(),e.$refs["dataForm"].resetFields(),e.dataForm.id&&e.getInfo()}))},quillEditorHandle:function(){var e=this;this.quillEditor=new d.a("#J_quillEditor",{modules:{toolbar:this.quillEditorToolbarOptions},theme:"snow"}),this.uploadUrl="".concat(window.SITE_CONFIG["apiURL"],"/system/sys/oss/upload?token=").concat(this.$getUserToken("token")),this.quillEditor.getModule("toolbar").addHandler("image",(function(){e.$refs.uploadBtn.$el.click()})),this.quillEditor.on("text-change",(function(){e.dataForm.content=e.quillEditor.root.innerHTML}))},uploadBeforeUploadHandle:function(e){if("image/jpg"!==e.type&&"image/jpeg"!==e.type&&"image/png"!==e.type&&"image/gif"!==e.type)return this.$message.error("只支持jpg、png、gif格式的图片！"),!1},uploadSuccessHandle:function(e,t,a){if(0!==e.code)return this.$message.error(e.msg);this.quillEditor.insertEmbed(this.quillEditor.getSelection().index,"image",e.data.src)},getInfo:function(){var e=this;this.$http.get("/demo/news/".concat(this.dataForm.id)).then((function(t){var a=t.data;if(0!==a.code)return e.$message.error(a.msg);e.dataForm=a.data,e.quillEditor.root.innerHTML=e.dataForm.content})).catch((function(){}))},dataFormSubmitHandle:l()((function(){var e=this;this.$refs["dataForm"].validate((function(t){if(!t)return!1;e.$http[e.dataForm.id?"put":"post"]("/demo/news",e.dataForm,{headers:{"content-type":"application/x-www-form-urlencoded"}}).then((function(t){var a=t.data;if(0!==a.code)return e.$message.error(a.msg);e.$message({message:e.$t("prompt.success"),type:"success",duration:500,onClose:function(){e.visible=!1,e.$emit("refreshDataList")}})})).catch((function(){}))}))}),1e3,{leading:!0,trailing:!1})}},u=s,c=a("2877"),p=Object(c["a"])(u,r,n,!1,null,null,null);t["default"]=p.exports}}]);