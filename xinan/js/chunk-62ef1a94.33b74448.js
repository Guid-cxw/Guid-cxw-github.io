(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-62ef1a94"],{"0cb0":function(e,a,t){"use strict";t("ca1a")},6327:function(e,a,t){"use strict";t.r(a);var i=function(){var e=this,a=e._self._c;return a("el-dialog",{attrs:{visible:e.visible,title:e.applyStatus?"审核详情":"申诉详情",width:"1050px","close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(a){e.visible=a},close:e.closeHandle}},[a("el-form",{ref:"dataForm",attrs:{model:e.dataForm,rules:e.dataRule,"label-width":"120px"}},[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"appealInfo.appealTypeStr",label:"申诉类型"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.isdisabled,placeholder:"请选择申诉类型",clearable:""},on:{change:e.changeType},model:{value:e.dataForm.appealInfo.appealTypeStr,callback:function(a){e.$set(e.dataForm.appealInfo,"appealTypeStr",a)},expression:"dataForm.appealInfo.appealTypeStr"}},e._l(e.appealType,(function(e){return a("el-option",{key:e.value,attrs:{label:e.label,value:e.value}})})),1)],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"appealInfo.complainantName",label:"申诉人姓名"}},[a("el-input",{attrs:{disabled:e.isdisabled,placeholder:"请输入申诉人姓名"},model:{value:e.dataForm.appealInfo.complainantName,callback:function(a){e.$set(e.dataForm.appealInfo,"complainantName",a)},expression:"dataForm.appealInfo.complainantName"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"appealInfo.involvedPhone",label:"涉案号码"}},[a("el-input",{attrs:{disabled:e.isdisabled,placeholder:"请输入涉案号码",clearable:""},nativeOn:{"!blur":function(a){return e.searchinvolve.apply(null,arguments)}},model:{value:e.dataForm.appealInfo.involvedPhone,callback:function(a){e.$set(e.dataForm.appealInfo,"involvedPhone",a)},expression:"dataForm.appealInfo.involvedPhone"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"appealInfo.complainantNumber",label:"申诉人号码"}},[a("el-input",{attrs:{disabled:e.isdisabled,placeholder:"请输入申诉人号码"},model:{value:e.dataForm.appealInfo.complainantNumber,callback:function(a){e.$set(e.dataForm.appealInfo,"complainantNumber",a)},expression:"dataForm.appealInfo.complainantNumber"}})],1)],1),a("el-col",{attrs:{span:12}},[a("el-form-item",{attrs:{prop:"appealInfo.informationTypeStr",label:"信息类型"}},[a("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.isdisabled,placeholder:"请先选择申诉类型在选择信息类型",clearable:""},model:{value:e.dataForm.appealInfo.informationTypeStr,callback:function(a){e.$set(e.dataForm.appealInfo,"informationTypeStr",a)},expression:"dataForm.appealInfo.informationTypeStr"}},[e._l(e.allnumber,(function(t){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:1==e.allchangeype,expression:"allchangeype == 1"}],key:t.value,attrs:{label:t.label,value:t.value}})})),e._l(e.app,(function(t){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:3==e.allchangeype,expression:"allchangeype == 3"}],key:t.value,attrs:{label:t.label,value:t.value}})})),e._l(e.urlorip,(function(t){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:2==e.allchangeype,expression:"allchangeype == 2"}],key:t.value,attrs:{label:t.label,value:t.value}})})),e._l(e.relieve,(function(t){return a("el-option",{directives:[{name:"show",rawName:"v-show",value:4==e.allchangeype,expression:"allchangeype == 4"}],key:t.value,attrs:{label:t.label,value:t.value}})}))],2)],1)],1),a("el-col",{directives:[{name:"show",rawName:"v-show",value:1==e.allchangeype||e.id,expression:"allchangeype == 1 || id"}],attrs:{span:12}},[a("el-form-item",{attrs:{prop:"appealInfo.involvedPoliceLetterDate",label:"公安函件日期"}},[a("el-date-picker",{attrs:{disabled:e.isdisabled,"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择发案时间"},model:{value:e.dataForm.appealInfo.involvedPoliceLetterDate,callback:function(a){e.$set(e.dataForm.appealInfo,"involvedPoliceLetterDate",a)},expression:"dataForm.appealInfo.involvedPoliceLetterDate"}})],1)],1),a("el-col",{directives:[{name:"show",rawName:"v-show",value:1==e.allchangeype||e.id,expression:"allchangeype == 1 || id"}],attrs:{span:12}},[a("el-form-item",{attrs:{prop:"appealInfo.crimeTime",label:"发案时间"}},[a("el-date-picker",{attrs:{disabled:e.isdisabled,"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetime",placeholder:"选择发案时间"},model:{value:e.dataForm.appealInfo.crimeTime,callback:function(a){e.$set(e.dataForm.appealInfo,"crimeTime",a)},expression:"dataForm.appealInfo.crimeTime"}})],1)],1),a("el-col",{directives:[{name:"show",rawName:"v-show",value:1==e.allchangeype||e.id,expression:"allchangeype == 1 || id"}],attrs:{span:12}},[a("el-form-item",{attrs:{prop:"appealInfo.involvedPoliceLetterName",label:"公安函件文号"}},[a("el-input",{attrs:{disabled:e.isdisabled,placeholder:"请输入公安函件文号"},model:{value:e.dataForm.appealInfo.involvedPoliceLetterName,callback:function(a){e.$set(e.dataForm.appealInfo,"involvedPoliceLetterName",a)},expression:"dataForm.appealInfo.involvedPoliceLetterName"}})],1)],1),a("el-col",{directives:[{name:"show",rawName:"v-show",value:1==e.allchangeype||e.id,expression:"allchangeype == 1 || id"}],attrs:{span:12}},[a("el-form-item",{attrs:{prop:"appealInfo.victimNumber",label:"受害人号码"}},[a("el-input",{attrs:{disabled:e.isdisabled,placeholder:"请输入受害人号码"},model:{value:e.dataForm.appealInfo.victimNumber,callback:function(a){e.$set(e.dataForm.appealInfo,"victimNumber",a)},expression:"dataForm.appealInfo.victimNumber"}})],1)],1)],1),a("el-row",[a("el-col",[a("el-card",[a("div",{staticClass:"clearfix box-card-title",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("关联处置工单")])]),a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:e.dataListLoading,expression:"dataListLoading"}],ref:"tables",staticClass:"tab",staticStyle:{width:"100%"},attrs:{"row-key":e.getRowKey,data:e.dataList,border:"","header-cell-style":{background:"rgba(194, 210, 255, 0.3)",color:"#040415"}},on:{"selection-change":e.dataListSelectionChangeHandle}},[a("el-table-column",{attrs:{type:"selection","header-align":"center",align:"center",width:"50","reserve-selection":!0}}),a("el-table-column",{attrs:{prop:"serialNumber",align:"center",label:"工单编号"}}),a("el-table-column",{attrs:{prop:"title",label:"工单标题",align:"center"}}),a("el-table-column",{attrs:{prop:"involvedPhone",label:"涉案号码",align:"center"}}),a("el-table-column",{attrs:{prop:"createDate",label:"工单时间",align:"center",width:"200"}})],1)],1)],1)],1),e.isTab?e._e():a("el-row",[a("el-col",{attrs:{span:24}},[a("el-card",{staticClass:"box-card"},[a("div",{staticClass:"clearfix box-card-title",attrs:{slot:"header"},slot:"header"},[a("span",[e._v("申诉附件")])]),a("div",{staticClass:"btn"},[a("el-upload",{ref:"upload",staticClass:"model_upload_box",attrs:{limit:10,drag:"",disabled:e.uploadFlag,action:e.url,headers:{responseType:"arraybuffer"},"file-list":e.fileList,multiple:"","auto-upload":!1,accept:".XLS,.xls,.XLSX,.xlsx","on-change":e.onChange,"on-remove":e.emoveFileHandleMK,"before-remove":e.beforeRemove,"on-exceed":e.handleExceed}},[a("i",{staticClass:"el-icon-upload"}),a("div",{staticClass:"el-upload__text",domProps:{innerHTML:e._s("将文件拖到此处，或<em>点击导入</em>")}})])],1)])],1)],1),e.isTab?a("div",[a("el-table",{staticClass:"tab",staticStyle:{width:"100%"},attrs:{data:e.flieData,"header-cell-style":{background:"rgba(194, 210, 255, 0.3)",color:"#040415"}}},[a("el-table-column",{attrs:{prop:"fileName",label:"文件名称","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{prop:"updateDate",label:"上传时间","header-align":"center",align:"center"}}),a("el-table-column",{attrs:{label:e.$t("handle"),"header-align":"center",align:"center"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{type:"text",size:"small"},on:{click:function(a){return e.downLoadFile(t.row)}}},[e._v("下载")])]}}],null,!1,1456136793)})],1)],1):e._e()],1),a("template",{slot:"footer"},[e.isTab?e._e():a("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:function(a){return e.dataFormSubmitHandle()}}},[e._v("\n            "+e._s(e.$t("confirm"))+"\n        ")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.applyStatus,expression:"applyStatus"}],attrs:{type:"primary"},on:{click:e.submit}},[e._v("通过")]),a("el-button",{directives:[{name:"show",rawName:"v-show",value:e.applyStatus,expression:"applyStatus"}],attrs:{type:"danger"},on:{click:e.pass}},[e._v("不通过")]),a("el-button",{on:{click:function(a){e.visible=!1}}},[e._v(e._s(e.$t("cancel")))])],1)],2)},l=[],r=(t("8e6e"),t("456d"),t("ac6a"),t("a481"),t("c5f6"),t("7f7f"),t("ade3")),s=t("b047"),o=t.n(s),n=t("ed08"),d=t("dea3");function p(e,a){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);a&&(i=i.filter((function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable}))),t.push.apply(t,i)}return t}function c(e){for(var a=1;a<arguments.length;a++){var t=null!=arguments[a]?arguments[a]:{};a%2?p(Object(t),!0).forEach((function(a){Object(r["a"])(e,a,t[a])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(a){Object.defineProperty(e,a,Object.getOwnPropertyDescriptor(t,a))}))}return e}var m={props:["relieve","allnumber","urlorip","app","appealType"],data:function(){return{isdisabled:!0,applyStatus:"",id:"",dataListSelections:[],ids:"",allchangeype:"",dataList:[],dataListLoading:!1,fileList:[],appendixFile:[],url:"#",visible:!1,dataForm:{appealInfo:{appealType:"",complainantName:"",involvedPhone:"",complainantNumber:"",informationType:"",involvedPoliceLetterDate:"",crimeTime:"",involvedPoliceLetterName:"",victimNumber:""},baseIdList:[]},flag:!1,orderTypeList:Object(n["b"])("orderType"),uploadFlag:!1,templateUrl:"",templateFlag:!1,templateFile:"",flieData:[],isTab:!1,btnLoading:!1,errorHint:"",isErrorFlag:!1,timer:null}},components:{},created:function(){},mounted:function(){},watch:{},computed:{dataRule:function(){return Object(r["a"])({appealType:[{required:!0,message:this.$t("validate.required"),trigger:"blur"}],complainantName:[{required:!0,message:this.$t("validate.required"),trigger:"blur"}],involvedPhone:[{required:!0,message:this.$t("validate.required"),trigger:"blur"}],complainantNumber:[{required:!0,message:this.$t("validate.required"),trigger:"blur"}],informationType:[{required:!0,message:this.$t("validate.required"),trigger:"blur"}],involvedPoliceLetterDate:[{required:!0,message:this.$t("validate.required"),trigger:"blur"}],crimeTime:[{required:!0,message:this.$t("validate.required"),trigger:"blur"}],involvedPoliceLetterName:[{required:!0,message:this.$t("validate.required"),trigger:"blur"}],victimNumber:[{required:!0,message:this.$t("validate.required"),trigger:"change"}]},"complainantName",[{required:!0,message:this.$t("validate.required"),trigger:"change"}])}},methods:{dataListSelectionChangeHandle:function(e){this.dataListSelections=e},pass:function(){var e=this;this.visible=!1;var a=this.id,t=3;this.$http.post("/workorder/woappeal/pass",{id:a,isPass:3}).then((function(a){if(0==a.data.code)return e.$emit("refubish",t),e.$message.success(a.data.msg);e.$message.error(a.data.msg)}))},submit:function(){var e=this;this.visible=!1;var a=this.id,t=2;this.$http.post("/workorder/woappeal/pass",{id:a,isPass:2}).then((function(a){if(0==a.data.code)return e.$emit("refubish2",t),e.$message.success(a.data.msg);e.$message.error(a.data.msg)}))},getRowKey:function(e){return e.id},handleExceed:function(e,a){this.$message.warning("文件个数超出限制")},searchinvolve:function(){var e=this,a=this.dataForm.appealInfo.involvedPhone;(a||this.id)&&this.$http.get("/workorder/woappeal/city/selectBaseInfoByInvolvedPhone",{params:{involvedPhone:a}}).then((function(a){if(0!=a.data.code)return e.$message.error(a.data.msg);e.dataList=a.data.data}))},beforeRemove:function(e,a){return this.$confirm("确定移除 ".concat(e.name,"？"))},getListData:function(){var e=this;this.dataListLoading=!0,this.$http.get("/workorder/wobase/page",{params:c({page:this.page,limit:this.limit},this.dataForm)}).then((function(a){if(0!==a.data.code)return e.dataList=[],e.total=0,e.dataListLoading=!1,e.$message.error(a.data.msg);var t=a.data.data;e.total=Number(t.total),e.dataList=t.list,e.dataListLoading=!1}))},init:function(){var e=this;this.visible=!0,this.isTab=!1,this.allchangeype="",this.errorHint="",this.isErrorFlag=!1,this.fileList=[],this.$nextTick((function(){e.$refs["dataForm"].resetFields(),e.id&&(e.getInfo(),e.isTab=!0)}))},closeHandle:function(){var e=this;this.$refs.dataForm.clearValidate(),this.$refs.dataForm.resetFields(),this.fileList.length>0&&!this.isTab&&this.$refs.upload.clearFiles(),this.visible=!1,this.dataForm.file=[],this.dataForm.appendixFile=[],this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){e.isTab=!1}),500)},getInfo:function(){var e=this;this.$http.get("/workorder/woappeal/info",{params:{id:this.id}}).then((function(a){var t=a.data;if(e.allchangeype=t.data.appealInfo.appealType,0!==t.code)return e.$message.error(t.msg);e.dataForm=c(c({},e.dataForm),t.data),e.flieData=t.data.files,e.dataList=t.data.woBaseInfos})).catch((function(){}))},onChange:function(e,a){this.errorHint="",this.isErrorFlag=!1;var t=e.size/1024/1024<21;if(!t)return this.$message.warning("文件大小不能超过20M"),void(this.fileList=[]);var i=e.name.replace(/.+\./,""),l=["XLS","xls","XLSX","xlsx"];if(-1===l.indexOf(i.toLowerCase()))return this.$message.warning("请上传格式正确的文件"),void(this.fileList=[]);this.fileList=a},onChangeAccessory:function(e,a){this.errorHint="",this.isErrorFlag=!1;var t=e.size/1024/1024<21;if(!t)return this.$message.warning("文件大小不能超过20M"),void(this.appendixFile=[]);var i=e.name.replace(/.+\./,""),l=["XLS","xls","XLSX","xlsx"];return-1===l.indexOf(i.toLowerCase())?(this.$message.warning("请上传格式正确的文件"),void(this.appendixFile=[])):void 0},successHandle:function(e){0==e.code?(this.$message.success("上传成功！"),this.dataForm.attachmentList=this.dataForm.attachmentList.concat(e.data)):(this.$refs.upload.clearFiles(),this.$message.error(e.msg))},emoveFileHandleMK:function(e){for(var a=[],t=0;t<this.fileList.length;t++)this.fileList[t].uid!==e.uid&&a.push(this.fileList[t]);this.fileList=a,this.errorHint="",this.isErrorFlag=!1},downLoadFile:function(e){this.$http({method:"get",withCredentials:!1,timeout:36e4,responseType:"blob",url:"/workorder/common/file/download",params:{fileId:e.id}}).then((function(a){Object(d["a"])(a.data,e.fileName,"")}))},changeType:function(e){this.allchangeype=e},dataFormSubmitHandle:o()((function(){var e=this;this.$refs["dataForm"].validate((function(a){if(!a)return!1;if(0!=e.fileList.length){e.btnLoading=!0;var t=new FormData;for(var i in e.fileList.forEach((function(e){t.append("files",e.raw)})),e.dataForm.appealInfo)t.append("appealInfo."+i,e.dataForm.appealInfo[i]);e.dataListSelections.length>0&&(e.ids=e.dataListSelections.map((function(e){return e.id})),e.dataForm.baseIdList.push(e.ids)),t.append("baseIdList",e.dataForm.baseIdList),e.$http["post"]("/workorder/woappeal/city/create",t).then((function(a){var t=a.data;if(0!==t.code)return e.btnLoading=!1,e.isErrorFlag=!0,e.errorHint=t.msg,e.fileList=[],3==e.dataForm.type&&(e.dataForm=e.$options.data().dataForm),e.$message.error(t.msg);e.btnLoading=!1,e.$message({message:e.$t("prompt.success"),type:"success",duration:500,onClose:function(){e.visible=!1,e.$emit("refreshDataList"),e.closeHandle()}})})).catch((function(){e.btnLoading=!1}))}else e.$message.error("请上传文件")}))}),1e3,{leading:!0,trailing:!1})}},u=m,h=(t("0cb0"),t("2877")),f=Object(h["a"])(u,i,l,!1,null,null,null);a["default"]=f.exports},ca1a:function(e,a,t){}}]);