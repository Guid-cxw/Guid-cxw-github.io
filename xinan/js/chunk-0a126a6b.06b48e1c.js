(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0a126a6b"],{"33a8":function(e,t,s){"use strict";s.r(t);var i=function(){var e=this,t=e._self._c;return t("div",[t("el-dialog",{attrs:{visible:e.visible,width:"40%",title:e.title,"close-on-click-modal":!1,"close-on-press-escape":!1,"append-to-body":""},on:{"update:visible":function(t){e.visible=t},close:e.closedialog}},[t("el-upload",{ref:"upload",staticClass:"model_upload_box",attrs:{drag:"",action:e.url,headers:{responseType:"arraybuffer"},"file-list":e.fileList,"auto-upload":!1,"on-change":e.onChange,accept:".XLS, .xls, .XLSX, .xlsx"}},[t("i",{staticClass:"el-icon-upload"}),t("div",{staticClass:"el-upload__text",domProps:{innerHTML:e._s("将文件拖到此处，或<em>点击导入</em>")}}),t("div",{staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[t("div",[e._v("只支持XLS、xls、XLSX、xlsx格式文件,文件大小不超过20M")])])]),e.isErrorFlag?t("div",{staticClass:"error-hint"},[t("p",[e._v(e._s(e.errorHint))])]):e._e(),t("div",{staticClass:"upload-btn"},[t("p",{staticClass:"red"},[e._v(e._s(e.errormessage))]),t("el-button",{on:{click:e.requestChange}},[e._v("确定上传")])],1)],1)],1)},a=[],r=(s("7f7f"),s("a481"),{props:{title:{type:String,default:function(){return""}},url:{type:String,default:function(){return"#"}},downloadUrl:{type:String,default:function(){return""}}},data:function(){return{fileList:[],xls:".xls",xlsx:".xlsx",visible:!1,isErrorFlag:!1,errorHint:"",errormessage:"",uploadUrl:"",id:""}},methods:{closedialog:function(){this.visible=!1},init:function(){this.visible=!0,this.fileList=[],this.errormessage=""},onChange:function(e,t){this.errormessage="";var s=e.size/1024/1024<21;if(!s)return this.$message.warning("文件大小不能超过20M"),void(this.fileList=[]);var i=e.name.replace(/.+\./,""),a=["XLS","xls","XLSX","xlsx"];if(-1===a.indexOf(i.toLowerCase()))return this.$message.warning("请上传格式正确的文件"),void(this.fileList=[]);t.length>0&&(this.fileList=[t[t.length-1]])},requestChange:function(){var e=this;if(0==this.fileList.length)return this.$message.error("请上传文件");var t=new FormData;t.append("file",this.fileList[0].raw),t.append("cityId",this.id),this.$http.post(this.uploadUrl,t).then((function(t){if(0!=t.data.code)return e.errormessage=t.data.msg,e.$message.error(t.data.msg);e.$message.success(t.data.msg),e.visible=!1,e.errormessage="",e.$emit("getData")}))},downLoadTemplate:function(){this.$emit("downLoadTemplate")}}}),l=r,n=(s("af80"),s("2877")),o=Object(n["a"])(l,i,a,!1,null,"680bcb71",null);t["default"]=o.exports},af80:function(e,t,s){"use strict";s("b525")},b525:function(e,t,s){}}]);