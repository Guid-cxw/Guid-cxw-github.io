(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-0eb373ec"],{"5b50":function(e,t,a){"use strict";function i(e,t){var a=window.URL.createObjectURL(new Blob([e])),i=document.createElement("a");i.style.display="none",i.href=a,i.setAttribute("download",t),document.body.appendChild(i),i.click(),window.URL.revokeObjectURL(a),document.body.removeChild(i)}a.d(t,"a",(function(){return i}))},"9abe":function(e,t,a){},"9c7d":function(e,t,a){"use strict";a("9abe")},d9a6:function(e,t,a){"use strict";a.r(t);a("a481"),a("7f7f");var i=function(){var e=this,t=e._self._c;return t("div",{staticClass:"gather-task"},[t("el-dialog",{staticClass:"Dialog",attrs:{visible:e.diaLogClose,title:e.title,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(t){e.diaLogClose=t},close:e.closeDialog}},[t("div",{staticClass:"info-desc"},[t("el-form",{ref:"ruleForm",staticClass:"demo-form",attrs:{model:e.dataForm,rules:e.rules,"label-width":"220px"}},[t("el-form-item",{attrs:{label:"协助打击时间",prop:"dateTime"}},[t("el-col",{attrs:{span:24}},[t("el-date-picker",{staticStyle:{width:"100%"},attrs:{disabled:e.isFlag,"value-format":"yyyy-MM-dd",type:"date",placeholder:"选择日期"},model:{value:e.dataForm.dateTime,callback:function(t){e.$set(e.dataForm,"dateTime",t)},expression:"dataForm.dateTime"}})],1)],1),t("el-form-item",{attrs:{label:"涉案区域",prop:"city"}},[t("el-select",{staticStyle:{width:"100%"},attrs:{disabled:e.isFlag,placeholder:"请选择","collapse-tags":"",clearable:""},model:{value:e.dataForm.city,callback:function(t){e.$set(e.dataForm,"city",t)},expression:"dataForm.city"}},e._l(e.citys,(function(e){return t("el-option",{key:e.id,attrs:{label:e.name,value:e.id}})})),1)],1),t("el-form-item",{attrs:{label:"协助缴获设备数量",prop:"catchDevice"}},[t("el-input",{attrs:{disabled:e.isFlag,placeholder:"仅数字整数，大于零",clearable:""},on:{input:function(t){return e.dataForm.catchDevice=t.replace(/[^\d]|^[0]/g,"")}},model:{value:e.dataForm.catchDevice,callback:function(t){e.$set(e.dataForm,"catchDevice",t)},expression:"dataForm.catchDevice"}})],1),t("el-form-item",{attrs:{label:"涉及“简易组网GOIP”设备数量",prop:"goip"}},[t("el-input",{attrs:{disabled:e.isFlag,placeholder:"仅数字整数，大于零",clearable:""},on:{input:function(t){return e.dataForm.goip=t.replace(/[^\d]|^[0]/g,"")}},model:{value:e.dataForm.goip,callback:function(t){e.$set(e.dataForm,"goip",t)},expression:"dataForm.goip"}})],1),t("el-form-item",{attrs:{label:"协助打击窝点数量",prop:"defeatFaker"}},[t("el-input",{attrs:{disabled:e.isFlag,placeholder:"仅数字整数，大于零",clearable:""},on:{input:function(t){return e.dataForm.defeatFaker=t.replace(/[^\d]|^[0]/g,"")}},model:{value:e.dataForm.defeatFaker,callback:function(t){e.$set(e.dataForm,"defeatFaker",t)},expression:"dataForm.defeatFaker"}})],1),t("el-form-item",{attrs:{label:"协助抓获罪犯嫌疑人数量",prop:"catchFaker"}},[t("el-input",{attrs:{disabled:e.isFlag,placeholder:"仅数字整数，大于零",clearable:""},on:{input:function(t){return e.dataForm.catchFaker=t.replace(/[^\d]|^[0]/g,"")}},model:{value:e.dataForm.catchFaker,callback:function(t){e.$set(e.dataForm,"catchFaker",t)},expression:"dataForm.catchFaker"}})],1),t("el-form-item",{attrs:{label:"协助缴获号卡数量",prop:"catchSim"}},[t("el-input",{attrs:{disabled:e.isFlag,placeholder:"仅数字整数，大于零",clearable:""},on:{input:function(t){return e.dataForm.catchSim=t.replace(/[^\d]|^[0]/g,"")}},model:{value:e.dataForm.catchSim,callback:function(t){e.$set(e.dataForm,"catchSim",t)},expression:"dataForm.catchSim"}})],1),t("el-form-item",{attrs:{label:"备注",prop:"mark"}},[t("el-input",{attrs:{type:"textarea",disabled:e.isFlag},model:{value:e.dataForm.mark,callback:function(t){e.$set(e.dataForm,"mark",t)},expression:"dataForm.mark"}})],1),t("el-form-item",{attrs:{label:"案件文字描述",prop:"description"}},[t("el-input",{attrs:{type:"textarea",disabled:e.isFlag},model:{value:e.dataForm.description,callback:function(t){e.$set(e.dataForm,"description",t)},expression:"dataForm.description"}})],1),t("el-form-item",{staticClass:"file-desc",attrs:{label:"打击成效附件",prop:"fileList"}},[t("el-upload",{ref:"rebateUpload",class:e.isFlag?"upload-detail":"upload-demo",attrs:{headers:e.Myhead,disabled:e.isFlag,accept:".pdf",action:e.url,"file-list":e.dataForm.fileList,"on-change":e.handleChange,"before-upload":e.beforeUpload,"on-success":e.successHandleFile,"on-preview":e.previewdownload,"on-remove":e.handleRemove}},[t("el-button",{attrs:{size:"small",type:"primary",disabled:e.isFlag}},[e._v("点击上传")]),t("div",{directives:[{name:"show",rawName:"v-show",value:!e.isFlag,expression:"!isFlag"}],staticClass:"el-upload__tip",attrs:{slot:"tip"},slot:"tip"},[e._v("仅支持上传pdf格式")])],1)],1)],1)],1),e.isFlag?e._e():t("div",{staticClass:"footer-content"},[t("el-button",{on:{click:e.closeDialog}},[e._v("取消")]),t("el-button",{attrs:{type:"primary",loading:e.btnLoading},on:{click:e.enterBtnClick}},[e._v("保存")])],1)])],1)},r=[],o=(a("8e6e"),a("ac6a"),a("456d"),a("ade3")),n=a("5b50"),s=a("4328"),l=a.n(s);function c(e,t){var a=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);t&&(i=i.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),a.push.apply(a,i)}return a}function d(e){for(var t=1;t<arguments.length;t++){var a=null!=arguments[t]?arguments[t]:{};t%2?c(Object(a),!0).forEach((function(t){Object(o["a"])(e,t,a[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(a)):c(Object(a)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(a,t))}))}return e}var m={name:"issueDetail",components:{},props:{},data:function(){return{btnLoading:!1,diaLogClose:!1,dataForm:{id:"",city:"",dateTime:"",catchDevice:"",goip:"",defeatFaker:"",catchFaker:"",catchSim:"",delivery:!1,mark:"",description:"",pdfFile:"",fileList:[]},citys:[],isFlag:!1,timer:null,title:"",url:"".concat(window.SITE_CONFIG["apiURL"],"/dataprocess/catAssist/uploadFile?token=").concat(this.$getUserToken("token"))}},computed:{Myhead:function(){return{token:this.$getUserToken("token")}},rules:function(){return{dateTime:[{required:!0,message:"协助打击时间不能为空",trigger:"change"}],city:[{required:!0,message:"涉案区域不能为空",trigger:"change"}],catchDevice:[{required:!0,message:"协助缴获设备数量不能为空",trigger:"change"}],goip:[{required:!0,message:"涉及“简易组网GOIP”设备数量不能为空",trigger:"blur"}],defeatFaker:[{required:!0,message:"协助打击窝点数量不能为空",trigger:"blur"}],catchFaker:[{required:!0,message:"协助抓获罪犯嫌疑人数量不能为空",trigger:"blur"}],catchSim:[{required:!0,message:"协助缴获号卡数量不能为空",trigger:"change"}],fileList:[{required:!0,message:"打击成效附件不能上传为空",trigger:"change"}]}}},created:function(){},mounted:function(){},methods:{exportData:function(){var e=l.a.stringify(d({token:this.$getUserToken("token")},this.dataForm));window.location.href="".concat(window.SITE_CONFIG["apiURL"],"/dataprocess/catAssist/downLoadFile?").concat(e)},creatItem:function(){this.dataForm={name:"",remark:"",webUrl:""},this.title="新增上报",this.diaLogClose=!0},closeDialog:function(){var e=this;this.$refs["ruleForm"].resetFields(),this.diaLogClose=!1,this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){e.isFlag=!1,e.title=""}),500)},editShow:function(e){this.diaLogClose=!0,this.dataForm=d({},e)},enterBtnClick:function(){!this.dataForm.id&&this.winningAdd(),this.dataForm.id&&this.winningEdit()},winningAdd:function(){var e=this;this.$refs["ruleForm"].validate((function(t){if(!t)return!1;e.btnLoading=!0,e.$http.post("/winning/add",e.dataForm).then((function(t){if(e.btnLoading=!1,0!==t.data.code)return e.$message.error(t.data.msg);e.diaLogClose=!1,e.$message.success("创建成功"),e.$emit("getListData")})).catch((function(){e.btnLoading=!1}))}))},winningEdit:function(){var e=this;this.$refs["ruleForm"].validate((function(t){if(!t)return!1;e.btnLoading=!0,e.$http.put("/winning",e.dataForm).then((function(t){e.btnLoading=!1;var a=t.data.code;0==a?(e.diaLogClose=!1,e.$message.success("保存成功"),e.$emit("getListData")):e.$message.warning(t.data.msg)}))}))},beforeUpload:function(e){var t=e.name.substring(e.name.lastIndexOf(".")+1),a=["pdf"];if(-1===a.indexOf(t))return this.$message.warning("上传文件只能是pdf"),!1},handleChange:function(e,t){t.length>0?(this.$refs.ruleForm.clearValidate("fileList"),this.dataForm.fileList=[t[t.length-1]]):this.$refs.ruleForm.validateField("fileList")},handleRemove:function(e,t){this.dataForm.fileList=t},successHandleFile:function(e,t,a){this.dataForm.fileList=a,this.dataForm.pdfFile=e.data.fileName},previewdownload:function(e){var t=this;if(!this.isFlag)return!0;var a=l.a.stringify({token:this.$getUserToken("token"),fileName:e.name});getFileDownLoad(a).then((function(e){Object(n["a"])(e.data,t.dataForm.pdfFile)})).catch((function(e){}))}}},u=m,p=(a("9c7d"),a("2877")),f=Object(p["a"])(u,i,r,!1,null,"7240a3b4",null);t["default"]=f.exports}}]);