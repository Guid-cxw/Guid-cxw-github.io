(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5f1eb61c","chunk-428f98a9"],{"41ff":function(t,e,a){"use strict";a("71c6")},"490b":function(t,e,a){"use strict";a.r(e);a("c5f6");var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"gather-task"},[e("el-dialog",{staticClass:"Dialog",attrs:{visible:t.diaLogClose,title:t.title,"close-on-click-modal":!1,"close-on-press-escape":!1},on:{"update:visible":function(e){t.diaLogClose=e},close:t.closeDialog}},[e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dataListLoading,expression:"dataListLoading"}],ref:"tables",staticClass:"tab",staticStyle:{width:"90%",margin:"0 auto"},attrs:{data:t.dataList,border:"","header-cell-style":{background:"rgba(194, 210, 255, 0.3)",color:"#040415"},"row-key":t.getRowsKey},on:{"selection-change":t.dataListSelectionChangeHandle}},[e("el-table-column",{attrs:{prop:"city",align:"center",label:"地市公司"}}),e("el-table-column",{attrs:{prop:"feedbackUsername",label:"反馈人",align:"center"}}),e("el-table-column",{attrs:{prop:"feedbackDate",label:"反馈时间",align:"center"}}),e("el-table-column",{attrs:{prop:"feedbackStatus",label:"反馈状态",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-tag",{attrs:{type:t.feedbackStatusType(Number(a.row.feedbackStatus)).type}},[t._v("\n                        "+t._s(t.feedbackStatusType(Number(a.row.feedbackStatus)).txt)+"\n                    ")])]}}])})],1)],1)],1)},i=[],n=a("d7b1"),o={name:"feedback",components:{},props:{detailId:{type:String,default:""}},mixins:[n["a"]],data:function(){return{diaLogClose:!1,isFlag:!1,timer:null,title:"反馈列表"}},computed:{feedbackStatusType:function(){return function(t){var e={};switch(Number(t)){case 0:e.txt="未反馈",e.type="danger";break;case 1:e.txt="已反馈",e.type="success";break;default:e.txt="-",e.type="info";break}return e}}},created:function(){},mounted:function(){},methods:{init:function(){var t=this;this.diaLogClose=!0,this.$nextTick((function(){t.getListData()}))},closeDialog:function(){var t=this;this.diaLogClose=!1,this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){t.isFlag=!1}),500)},getListData:function(){var t=this;this.dataListLoading=!0,this.$http.get("/workorder/wobase/feedback/list",{params:{id:this.detailId}}).then((function(e){if(0!==e.data.code)return t.dataList=[],t.dataListLoading=!1,t.$message.error(e.data.msg);var a=e.data.data;t.dataList=a,t.dataListLoading=!1}))}}},l=o,s=(a("41ff"),a("2877")),c=Object(s["a"])(l,r,i,!1,null,"380e0c6e",null);e["default"]=c.exports},"71c6":function(t,e,a){},8324:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("div",{staticClass:"note-container"},[e("el-card",{staticClass:"aui-card--fill",attrs:{shadow:"never"}},[e("el-form",{ref:"studyForm",attrs:{inline:!0,model:t.dataForm},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.searchData()}}},[e("el-form-item",{attrs:{label:"工单编号"}},[e("el-input",{attrs:{placeholder:"请输入工单编号",clearable:""},model:{value:t.dataForm.serialNumber,callback:function(e){t.$set(t.dataForm,"serialNumber",e)},expression:"dataForm.serialNumber"}})],1),e("el-form-item",{attrs:{label:"工单标题"}},[e("el-input",{attrs:{placeholder:"请输入工单标题",clearable:""},model:{value:t.dataForm.title,callback:function(e){t.$set(t.dataForm,"title",e)},expression:"dataForm.title"}})],1),e("el-form-item",{attrs:{label:"工单类型"}},[e("el-select",{attrs:{placeholder:"请选择工单类型",clearable:""},model:{value:t.dataForm.type,callback:function(e){t.$set(t.dataForm,"type",e)},expression:"dataForm.type"}},t._l(t.orderTypeList,(function(t){return e("el-option",{key:t.dictValue,attrs:{label:t.dictLabel,value:t.dictValue}})})),1)],1),e("el-form-item",{attrs:{label:"工单时间"}},[e("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss",type:"datetimerange","start-placeholder":"开始时间","end-placeholder":"结束时间",clearable:""},model:{value:t.daterange,callback:function(e){t.daterange=e},expression:"daterange"}})],1),e("el-form-item",{attrs:{label:"发起方"}},[e("el-input",{attrs:{placeholder:"请输入发起方",clearable:""},model:{value:t.dataForm.originator,callback:function(e){t.$set(t.dataForm,"originator",e)},expression:"dataForm.originator"}})],1),e("el-form-item",[e("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.searchData()}}},[t._v("查询")])],1),e("el-form-item",[e("el-button",{on:{click:function(e){return t.reset()}}},[t._v("重置")])],1),e("el-form-item",[e("el-button",{attrs:{type:"success"},on:{click:function(e){return t.launchAdd()}}},[t._v("发起工单")])],1)],1),e("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.dataListLoading,expression:"dataListLoading"}],ref:"tables",staticClass:"tab",staticStyle:{width:"100%"},attrs:{data:t.dataList,"row-style":t.iRowStyle,"cell-style":t.iCellStyle,"header-row-style":t.iHeaderRowStyle,border:"","header-cell-style":{background:"rgba(194, 210, 255, 0.3)",color:"#040415"},"row-key":t.getRowsKey},on:{"selection-change":t.dataListSelectionChangeHandle}},[e("el-table-column",{attrs:{prop:"serialNumber",align:"center",label:"工单编号",width:"150"}}),e("el-table-column",{attrs:{prop:"title",label:"工单标题",align:"center",width:"300"}}),e("el-table-column",{attrs:{prop:"typeStr",label:"工单类型",align:"center",width:"150"}}),e("el-table-column",{attrs:{prop:"cityFeedback",label:"地市反馈",align:"center",width:"120"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.createDialog(a.row.id)}}},[t._v("\n                            "+t._s(a.row.cityFeedback)+"\n                        ")])]}}])}),e("el-table-column",{attrs:{width:"200px",prop:"createDate",label:"工单时间",align:"center"}}),e("el-table-column",{attrs:{prop:"originator",label:"发起方",width:"150px",align:"center"}}),e("el-table-column",{attrs:{label:"操作",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.launchDetail(a.row.id)}}},[t._v("详情")]),1==a.row.type?[e("el-button",{attrs:{type:"text",disabled:1==a.row.canceled},on:{click:function(e){return t.recordLook(a.row)}}},[t._v("\n                                查看反馈\n                            ")])]:t._e(),2==a.row.type?[e("el-button",{attrs:{type:"text",disabled:1==a.row.canceled},on:{click:function(e){return t.cheatLook(a.row)}}},[t._v("\n                                查看反馈\n                            ")])]:t._e(),e("el-button",{attrs:{type:"text",disabled:1==a.row.canceled},on:{click:function(e){return t.launchAmend(a.row.id)}}},[t._v("\n                            修改\n                        ")]),e("el-button",{attrs:{type:"text",disabled:1==a.row.canceled},on:{click:function(e){return t.repeal(a.row.id)}}},[t._v("\n                            "+t._s(1==a.row.canceled?"已撤销":"撤销")+"\n                        ")]),e("el-button",{attrs:{type:"text"},on:{click:function(e){return t.derive(a.row)}}},[t._v("导出")])]}}])})],1),e("el-pagination",{attrs:{"current-page":t.page,"page-sizes":[10,20,50,100],"page-size":t.limit,total:t.total,layout:"total, sizes, prev, pager, next, jumper"},on:{"update:currentPage":function(e){t.page=e},"update:current-page":function(e){t.page=e},"size-change":t.pageSizeChangeHandle,"current-change":t.pageCurrentChangeHandle}})],1),t.taskRefVisible?e("task",{ref:"taskRef",on:{refreshDataList:t.getListData}}):t._e(),e("feedback",{ref:"feedbackRef",attrs:{detailId:t.feedbackId},on:{getListData:t.getListData}})],1)},i=[],n=(a("8e6e"),a("ac6a"),a("456d"),a("c5f6"),a("ade3")),o=a("4328"),l=a.n(o),s=a("d7b1"),c=a("ed08"),d=a("daae"),u=a("490b"),p=a("5d2d"),f=a("dea3");function m(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function h(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?m(Object(a),!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):m(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var b={name:"workOderList",props:{},mixins:[s["a"]],data:function(){return{message:"我是父组件上的值",dataForm:{type:"",startDate:"",endDate:"",originator:"",title:"",serialNumber:""},daterange:[],orderTypeList:Object(c["b"])("orderType"),taskRefVisible:!1,feedbackId:""}},computed:{},watch:{daterange:function(t){this.dataForm.startDate=null!==t?t[0]:"",this.dataForm.endDate=null!==t?t[1]:""}},mounted:function(){},activated:function(){},components:{task:d["default"],feedback:u["default"]},methods:{iRowStyle:function(t){t.row,t.rowIndex;return"height:30px"},iHeaderRowStyle:function(t){t.row,t.rowIndex;return"height:30px"},iCellStyle:function(t){t.row,t.column,t.rowIndex,t.columnIndex;return"padding:0px"},init:function(){this.getListData()},reset:function(){this.dataForm=this.$options.data().dataForm,this.daterange=[],this.getListData()},getListData:function(){var t=this;this.dataListLoading=!0,this.$http.get("/workorder/wobase/page",{params:h({page:this.page,limit:this.limit},this.dataForm)}).then((function(e){if(0!==e.data.code)return t.dataList=[],t.total=0,t.dataListLoading=!1,t.$message.error(e.data.msg);var a=e.data.data;t.total=Number(a.total),t.dataList=a.list,t.dataListLoading=!1}))},launchAdd:function(){var t=this;this.taskRefVisible=!0,this.$nextTick((function(){t.$refs["taskRef"].title="工单新增",t.$refs["taskRef"].isShow=0,t.$refs["taskRef"].init()}))},launchDetail:function(t){var e=this;this.taskRefVisible=!0,this.$nextTick((function(){e.$refs["taskRef"].title="工单详情",e.$refs["taskRef"].dataForm.id=t,e.$refs["taskRef"].isShow=1,e.$refs["taskRef"].init()}))},launchAmend:function(t){var e=this;this.taskRefVisible=!0,this.$nextTick((function(){e.$refs["taskRef"].title="工单修改",e.$refs["taskRef"].dataForm.id=t,e.$refs["taskRef"].isShow=2,e.$refs["taskRef"].init()}))},createDialog:function(t){var e=this;this.$nextTick((function(){e.$refs["feedbackRef"].init(),e.feedbackId=t}))},recordLook:function(t){this.$router.push({path:"/look-record"}),Object(p["b"])("look_recordId",JSON.stringify(t.id)),Object(p["b"])("look_recordType",t.type)},cheatLook:function(t){this.$router.push({path:"/look-cheat"}),Object(p["b"])("look_cheatId",JSON.stringify(t.id)),Object(p["b"])("look_cheatType",t.type)},repeal:function(t){var e=this;this.$confirm("此操作将撤销该记录，请确认操作！","撤销",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(){},beforeClose:function(a,r,i){"confirm"===a?e.$http.get("/workorder/wobase/cancel",{params:{id:t}}).then((function(t){if(0!==t.data.code)return i(),r.confirmButtonLoading=!1,e.$message.error(t.data.msg);r.confirmButtonLoading=!1,i(),e.$message.success("撤销成功"),e.getListData()})):i()}}).finally((function(){ctx.confirmButtonLoading=!1})).catch((function(){ctx.confirmButtonLoading=!1}))},derive:function(t){var e=this;this.$confirm("此操作将导出该记录，请确认操作！","导出",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning",callback:function(){},beforeClose:function(a,r,i){if("confirm"===a){r.confirmButtonLoading=!0;var n=l.a.stringify({token:e.$getUserToken("token"),id:t.id}),o={method:"get",withCredentials:!1,timeout:36e4,responseType:"blob"};e.$http(h(h({},o),{},{url:"/workorder/wobase/export?".concat(n)})).then((function(e){Object(f["a"])(e.data,t.title)})),1===t.type&&(e.$http(h(h({},o),{},{url:"/workorder/wobase/exportDetail?".concat(n)})).then((function(e){Object(f["a"])(e.data,"".concat(t.createDate,"反馈集团公司涉案核查参考-工单日期"))})),e.$http(h(h({},o),{},{url:"/workorder/wobase/exportBadCreditUser?".concat(n)})).then((function(e){Object(f["a"])(e.data,"".concat(t.createDate,"不良信用库数据报送模板--江苏省"))}))),r.confirmButtonLoading=!1,i()}else i()}}).finally((function(){ctx.confirmButtonLoading=!1})).catch((function(){ctx.confirmButtonLoading=!1}))}}},g=b,y=a("2877"),k=Object(y["a"])(g,r,i,!1,null,"4df9ccd3",null);e["default"]=k.exports},8865:function(t,e,a){"use strict";a("e6b1")},daae:function(t,e,a){"use strict";a.r(e);var r=function(){var t=this,e=t._self._c;return e("el-dialog",{attrs:{visible:t.visible,title:t.title,width:"800px","close-on-click-modal":!1,"close-on-press-escape":!1,top:"2%"},on:{"update:visible":function(e){t.visible=e},close:t.closeHandle}},[e("el-form",{ref:"dataForm",attrs:{model:t.dataForm,rules:t.dataRule,"label-width":"120px",disabled:Boolean(1==t.isShow)}},[e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{prop:"title",label:"工单标题"}},[e("el-input",{attrs:{placeholder:"请输入工单标题",clearable:""},model:{value:t.dataForm.title,callback:function(e){t.$set(t.dataForm,"title",e)},expression:"dataForm.title"}})],1)],1),e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{prop:"type",label:"工单类型"}},[e("el-select",{attrs:{placeholder:"请选择工单类型",clearable:"",disabled:Boolean(2==t.isShow)},on:{change:t.changeType},model:{value:t.dataForm.type,callback:function(e){t.$set(t.dataForm,"type",e)},expression:"dataForm.type"}},t._l(t.orderTypeList,(function(t){return e("el-option",{key:t.dictValue,attrs:{label:t.dictLabel,value:t.dictValue}})})),1)],1)],1)],1),e("el-row",[e("el-col",{attrs:{span:12}},[e("el-form-item",{attrs:{prop:"date",label:"反馈期限"}},[e("el-date-picker",{attrs:{"value-format":"yyyy-MM-dd HH:mm:ss","picker-options":t.pickerOptions,"default-time":"23:59:59",type:"datetime",placeholder:"选择反馈期限"},model:{value:t.dataForm.date,callback:function(e){t.$set(t.dataForm,"date",e)},expression:"dataForm.date"}})],1)],1)],1),e("el-row",[e("el-col",{attrs:{span:23}},[e("el-form-item",{attrs:{label:"工单说明"}},[e("el-input",{attrs:{type:"textarea",rows:6,placeholder:"请输入工单说明"},model:{value:t.dataForm.description,callback:function(e){t.$set(t.dataForm,"description",e)},expression:"dataForm.description"}})],1)],1)],1),1!=t.isShow?e("el-row",[e("el-col",{attrs:{span:24}},[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix box-card-title",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("模板信息")])]),e("div",{staticClass:"btn"},[e("el-upload",{ref:"upload",staticClass:"model_upload_box",attrs:{drag:"",disabled:t.uploadFlag,action:t.url,headers:{responseType:"arraybuffer"},"file-list":t.fileList,"auto-upload":!1,accept:".XLS,.xls,.XLSX,.xlsx","on-change":t.onChange,"on-remove":t.emoveFileHandleMK}},[e("i",{staticClass:"el-icon-upload"}),e("div",{staticClass:"el-upload__text",domProps:{innerHTML:t._s("只能上传<em>.XLS,.xls,.XLSX,.xlsx</em>格式文件")}})])],1)])],1)],1):t._e(),1!=t.isShow?e("el-row",[e("el-col",{attrs:{span:24}},[e("el-card",{staticClass:"box-card"},[e("div",{staticClass:"clearfix box-card-title",attrs:{slot:"header"},slot:"header"},[e("span",[t._v("附件信息")])]),e("div",{staticClass:"btn"},[e("el-upload",{ref:"appendUpload",staticClass:"model_upload_box",attrs:{drag:"",disabled:t.uploadFlag,action:t.url,headers:{responseType:"arraybuffer"},"file-list":t.appendixFile,multiple:"","auto-upload":!1,limit:10,"on-change":t.onChangeAccessory,"on-remove":t.emoveFileHandleFJ}},[e("i",{staticClass:"el-icon-upload"}),e("div",{staticClass:"el-upload__text",domProps:{innerHTML:t._s("单个文件不能超过<em>20M</em>,文件数量限制为<em>10个</em>")}})])],1)])],1)],1):t._e(),t.isErrorFlag?e("div",{staticClass:"error-hint"},[e("p",[t._v(t._s(t.errorHint))])]):t._e()],1),1==t.isShow?e("div",[e("el-table",{staticClass:"tab",staticStyle:{width:"100%"},attrs:{data:t.flieData,"header-cell-style":{background:"rgba(194, 210, 255, 0.3)",color:"#040415"}}},[e("el-table-column",{attrs:{prop:"type",label:"文件类型","header-align":"center",align:"center"}}),e("el-table-column",{attrs:{prop:"fileName",label:"文件名称","header-align":"center",align:"center"}}),e("el-table-column",{attrs:{prop:"updateDate",label:"上传时间","header-align":"center",align:"center"}}),e("el-table-column",{attrs:{label:t.$t("handle"),"header-align":"center",align:"center"},scopedSlots:t._u([{key:"default",fn:function(a){return[e("el-button",{attrs:{type:"text",size:"small"},on:{click:function(e){return t.downLoadFile(a.row)}}},[t._v("下载")])]}}],null,!1,1456136793)})],1)],1):t._e(),e("template",{slot:"footer"},[1!=t.isShow?e("el-button",{attrs:{type:"primary",loading:t.btnLoading},on:{click:function(e){2==t.isShow?t.updateDataFormSubmitHandle():t.dataFormSubmitHandle()}}},[t._v("\n            "+t._s(t.$t("confirm"))+"\n        ")]):t._e(),e("el-button",{on:{click:function(e){t.visible=!1}}},[t._v(t._s(t.$t("cancel")))])],1)],2)},i=[],n=(a("8e6e"),a("456d"),a("ac6a"),a("7f7f"),a("a481"),a("ade3")),o=a("b047"),l=a.n(o),s=a("ed08"),c=a("dea3");function d(t,e){var a=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),a.push.apply(a,r)}return a}function u(t){for(var e=1;e<arguments.length;e++){var a=null!=arguments[e]?arguments[e]:{};e%2?d(Object(a),!0).forEach((function(e){Object(n["a"])(t,e,a[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(a)):d(Object(a)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(a,e))}))}return t}var p={props:{message:{type:String}},data:function(){var t=this;return{pickerOptions:{disabledDate:function(e){if(t.dataForm.id){var a=new Date(t.currentTime),r=a.getTime();return e.getTime()<r}return e.getTime()<Date.now()-864e5}},title:"工单新增",fileList:[],appendixFile:[],url:"#",visible:!1,dataForm:{id:"",title:"",type:"",date:"",file:[],description:""},orderTypeList:Object(s["b"])("orderType"),uploadFlag:!1,templateUrl:"",templateFlag:!1,templateFile:"",flieData:[],errorHint:"",isErrorFlag:!1,timer:null,isShow:0,btnLoading:!1,currentTime:""}},components:{},computed:{dataRule:function(){return{title:[{required:!0,message:this.$t("validate.required"),trigger:"blur"}],type:[{required:!0,message:this.$t("validate.required"),trigger:"blur"}],date:[{required:!0,message:this.$t("validate.required"),trigger:"change"}]}}},methods:{init:function(){var t=this;this.visible=!0,this.errorHint="",this.isErrorFlag=!1,this.fileList=[],this.appendixFile=[],this.$nextTick((function(){t.$refs["dataForm"].resetFields(),1!=t.isShow&&2!=t.isShow||t.getInfo()}))},closeHandle:function(){var t=this;this.$refs.dataForm.clearValidate(),this.$refs.dataForm.resetFields(),this.dataForm.id="",this.fileList.length>0&&!this.isTab&&(this.$refs.upload.clearFiles(),this.$refs["appendUpload"].clearFiles()),this.visible=!1,this.dataForm.file=[],this.dataForm.appendixFile=[],this.timer&&clearTimeout(this.timer),this.timer=setTimeout((function(){t.dataForm=t.$options.data().dataForm,t.isShow=0}),500)},getInfo:function(){var t=this;this.$http.get("/workorder/wobase/info",{params:{id:this.dataForm.id}}).then((function(e){var a=e.data;if(0!==a.code)return t.$message.error(a.msg);t.dataForm=u(u({},t.dataForm),a.data),t.dataForm.type=String(a.data.type),t.dataForm.date=a.data.feedbackDeadline,t.flieData=a.data.fileInfoList,t.currentTime=a.data.feedbackDeadline})).catch((function(){}))},onChange:function(t,e){this.errorHint="",this.isErrorFlag=!1;var a=t.size/1024/1024<21;if(!a)return this.$message.warning("文件大小不能超过20M"),void(this.fileList=[]);var r=t.name.replace(/.+\./,""),i=["XLS","xls","XLSX","xlsx"];if(-1===i.indexOf(r.toLowerCase()))return this.$message.warning("请上传格式正确的文件"),void(this.fileList=[]);e.length>0&&(this.fileList=[e[e.length-1]],this.dataForm.file=this.fileList[0].raw)},onChangeAccessory:function(t,e){this.errorHint="",this.isErrorFlag=!1;var a=t.size/1024/1024<21;if(!a)return this.$message.warning("单个文件大小不能超过20M"),void e.pop();e.length>10?e.pop():this.appendixFile=e},emoveFileHandleMK:function(t){this.fileList=[],this.dataForm.file=[],this.errorHint="",this.isErrorFlag=!1},emoveFileHandleFJ:function(t,e){this.appendixFile=e,this.errorHint="",this.isErrorFlag=!1},deleteFileRow:function(t){var e=t.id;this.dataForm.attachmentList=this.dataForm.attachmentList.filter((function(t){return t.id!=e}))},downLoadFile:function(t){this.$http({method:"get",withCredentials:!1,timeout:36e4,responseType:"blob",url:"/workorder/common/file/download",params:{fileId:t.id}}).then((function(e){Object(c["a"])(e.data,t.fileName,"")}))},changeType:function(t){},dataFormSubmitHandle:l()((function(){var t=this;this.$refs["dataForm"].validate((function(e){if(!e)return!1;if(0!=t.fileList.length&&0!=t.appendixFile.length||3==t.dataForm.type){t.btnLoading=!0;var a=new FormData;for(var r in t.dataForm)a.append(r,t.dataForm[r]);t.appendixFile.length>0&&t.appendixFile.forEach((function(t,e){a.append("appendixFileList",t.raw)})),t.$http.post("/workorder/wobase/import",a).then((function(e){var a=e.data;if(0!==a.code)return t.btnLoading=!1,t.isErrorFlag=!0,t.errorHint=a.msg,3==t.dataForm.type&&(t.dataForm=t.$options.data().dataForm),t.$message.error(a.msg);t.btnLoading=!1,t.$message({message:a.msg,type:"success",duration:500,onClose:function(){t.visible=!1,t.closeHandle(),t.$emit("refreshDataList")}})})).catch((function(){t.btnLoading=!1}))}else t.$message.error("请上传文件")}))}),1e3,{leading:!0,trailing:!1}),successHandle:function(t){0==t.code?(this.$message.success("上传成功！"),this.dataForm.attachmentList=this.dataForm.attachmentList.concat(t.data)):(this.$refs.upload.clearFiles(),this.$message.error(t.msg))},updateDataFormSubmitHandle:l()((function(){var t=this;this.$refs["dataForm"].validate((function(e){if(!e)return!1;if(t.fileList.length>0&&0==t.appendixFile.length)return t.$message.error("请上传附件信息文件");if(0==t.fileList.length&&t.appendixFile.length>0)return t.$message.error("请上传模板信息文件");t.btnLoading=!0;var a=new FormData;for(var r in t.dataForm)a.append(r,t.dataForm[r]);t.appendixFile.length>0&&t.appendixFile.forEach((function(t,e){a.append("appendixFileList",t.raw)})),t.$http.post("/workorder/wobase/update/import",a).then((function(e){var a=e.data;if(0!==a.code)return t.btnLoading=!1,t.isErrorFlag=!0,t.errorHint=a.msg,3==t.dataForm.type&&(t.dataForm=t.$options.data().dataForm),t.$message.error(a.msg);t.btnLoading=!1,t.$message({message:a.msg,type:"success",duration:500,onClose:function(){t.visible=!1,t.closeHandle(),t.$emit("refreshDataList")}})})).catch((function(){t.btnLoading=!1}))}))}),1e3,{leading:!0,trailing:!1})}},f=p,m=(a("8865"),a("2877")),h=Object(m["a"])(f,r,i,!1,null,null,null);e["default"]=h.exports},e6b1:function(t,e,a){}}]);